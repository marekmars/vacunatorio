extends layout.pug
block link
  link(href='styles/styleTablaLink.css' rel='stylesheet')  
block scripts
  script(defer src="scripts/alertas.js")  
block content
  main.form-signin.m-auto.container.mt-5.w-100.position-relative(data-bs-theme="dark")
    if resultado && resultado.length > 0
      h1.h1.text-center.my-5 Envio de Vacunas a Depocitos Provinciales
      hr
      form#recurso.form.form-floting.my-3.row.g-3.w-100.mx-auto(action="/envioVacunas", method="post" data-bs-theme="dark" onsubmit=`return confirmarEnvio(event)`)
       table.table.table-striped.text-center(data-bs-theme='dark')
        thead.sticky-top(style="background-color: #343a40;")
          tr
            th Id Lote
            th Vacuna
            th Nombre Comercial 
            th Nombre Laboratorio
            th Origen 
            th Fecha de Fabricacion
            th Fecha de Vencimiento 
            th Vencida 
            th Deposito 
            th Cantidad de Vacunas en Stock
            th Cantidad de Vacunas a Pedir
        tbody
          each item in resultado
            tr
              td= item.idLote
              td= item.tipoVacuna
              td= item.nombreComercial 
              td= item.nombreLaboratorio
              td= item.paisOrigen
              td= item.fechaFabricacion
              td= item.fechaVencimiento
              td= item.vencida
              td= item.deposito
              td= item.cantVacunas 
              td  
                input.form-control.mx-auto(type="number", name=`${item.idLote}` requiered)  
       .d-flex.gap-5.form-floating.justify-content-ceneter.align-items-center.mx-auto.col-12.text-center.flex-wrap      
         select#depositos.form-select(name="deposito")
          option(value="-") -
          each optionValue, optionLabel in resultadoDepoProv
            option(value=optionValue.idDepoProv)= `Deposito: ${optionValue.idDepoProv} - ${optionValue.provincia} - ${optionValue.ciudad} (${optionValue.direccion})` 
         label.ms-2(for="deposito")  Depositos Provincia 
       .d-flex.gap-5.form-floating.justify-content-ceneter.align-items-center.mx-auto.col-12.text-center.flex-wrap
           button.btn.btn-primary.mx-auto.mb-5
            i.fa-solid.fa-truck-fast &nbsp; Enviar
    
    - if (typeof alert !== "undefined")
      script.
        Swal.fire({
          title: '#{alertTitle}',
          text: '#{alertMessage}',
          icon: '#{alertIcon}',
          showConfirmButton: #{showConfirmButton},
          timer: #{timer}
        }).then(() => {
          window.location = '/#{ruta}';
        })